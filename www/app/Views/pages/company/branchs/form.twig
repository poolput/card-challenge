{% extends "layout/index.html" %}
{% block head %}
{{ parent() }}

<link rel="stylesheet" type="text/css" href="{{ base_url }}/theme/bower_components/select2/css/select2.min.css">
<style>
  .select2-container--default .select2-selection--single .select2-selection__rendered {
    background-color: #fff !important;
  }
  .select2-container .select2-selection--single {
    height: auto !important;
  }
</style>
{% endblock %}
{% block content %}

<div class="pcoded-content">
	<div class="pcoded-inner-content">
		<div class="main-body">
			<div class="page-wrapper">
				<div class="page-header">
					<div class="row align-items-end">
						<div class="col-lg-4">
							<div class="page-header-breadcrumb">
								{{ breadcrumb|raw }}
							</div>
						</div>
						<div class="col-lg-8 text-right">
							<div class="page-header-title">
								<div class="d-inline">
									<h4>
										{{ title_body }}
									</h4>
									</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="page-body">
					<div class="row">

						<div class="col-sm-12">
							<div class="card">
								<div class="card-block">
								
									<h4 class="sub-title">Company Profile Inputs</h4>
									<form action="" method="post" autocomplete="off" id="form_branch" >
										<input type="hidden" name="branch_id" id="branch_id" value="{{ branch.branch_id }}">
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Branch Name<span class="text-danger error">*</span></label>
											<div class="col-sm-10">
												<input type="text" class="form-control" name="branch_name" id="branch_name" value="{{ branch.branch_name }}"> <span class="messages"><p class="text-danger error">
														{{ incurrect_message }}
													</p></span>
											</div>
										</div>
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Code</label>
											<div class="col-sm-10">
												<input type="text" class="form-control" name="branch_code" id="branch_code" value="{{ branch.branch_code }}"> <span class="messages"><p class="text-danger error">
														{{ incurrect_message }}
													</p></span>
											</div>
										</div>
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Company<span class="text-danger error">*</span></label>
											<div class="col-sm-10">
												<select class="form-control" name="company_id" id="company_id">
													<option value="">---select---</option>
													{% for company in companies %}
    													{% set selected = '' %}
    													{%  if company.company_id == branch.company_id %}
    													    {% set selected = ' selected="selected" ' %}
    													{%  endif %}
														<option {{ selected }} value="{{ company.company_id }}">{{ company.company_name }}</option>
													{% endfor %}
												</select> <span class="messages"><p class="text-danger error">
														{{ incurrect_message }}
													</p></span>
											</div>
										</div>
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Country<span class="text-danger error">*</span></label>
											<div class="col-sm-10">
												<select class="form-control" name="country_code" id="country_code">
													<option value="">---select---</option>
													{% for country in countries %}
    													{% set selected = '' %}
    													{%  if country.country_code == branch.country_code %}
    													    {% set selected = ' selected="selected" ' %}
    													{%  endif %}
														<option {{ selected }} value="{{ country.country_code }}">{{ country.country_name }}</option>
													{% endfor %}
												</select> <span class="messages"><p class="text-danger error">
														{{ incurrect_message }}
													</p></span>
											</div>
										</div>
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Phone<span class="text-danger error">*</span></label>
											<div class="col-sm-10">
												<input type="text" class="form-control" name="branch_phone" id="branch_phone" value="{{ branch.branch_phone }}"> <span class="messages"><p class="text-danger error">
														{{ incurrect_message }}
													</p></span>
											</div>
										</div>
                    						<div class="form-group row">
											<label class="col-sm-2 col-form-label">Province<span class="text-danger error">*</span></label>
											<div class="col-sm-10">
												<select class="form-control" name="province_id" id="province_id">
													<option value="">---select---</option>
													{% for province in provinces %}
    													{% set selected = '' %}
    													{%  if province.province_id == branch.province_id %}
    													    {% set selected = ' selected="selected" ' %}
    													{%  endif %}
														<option {{ selected }} value="{{ province.province_id }}">{{ province.province_name_eng }}</option>
													{% endfor %}
												</select> <span class="messages"><p class="text-danger error">
														{{ incurrect_message }}
													</p></span>
											</div>
										</div>
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Module</label>
											<div class="border-checkbox-group border-checkbox-group-primary col-sm-10">
												<input type="checkbox" class="border-checkbox" name="module_heatmap" id="module_heatmap" value="1">
														{#{ incurrect_message }#}
												<label class="border-checkbox-label" for="module_heatmap">Heatmap</label>
											</div>
										</div>
										{# <div class="border-checkbox-group border-checkbox-group-primary pl-2">
                                                                        <input class="border-checkbox" type="checkbox" id="heatmap">
                                                                        <label class="border-checkbox-label" for="checkbox1">Heatmap</label>
                                                                    </div> #}
										<div class="form-group row">
											<label class="col-sm-2 col-form-label">Remark</label>
											<div class="col-sm-10">
												<textarea class="form-control" name="branch_remark" id="branch_remark" value="{{ branch.remark }}"></textarea> <span class="messages"><p class="text-danger error">
														{#{ incurrect_message }#}
													</p></span>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12 text-right">
												<button type="button" class="btn btn-outline-secondary btn-cancel">Cancel</button>
												<button class="btn btn-secondary btn-save">&nbsp; Save &nbsp;</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}
{% block footer %}
{{ parent() }}
<script src="{{ base_url }}/theme/bower_components/i18next/js/i18next.min.js"></script>
<script src="{{ base_url }}/theme/bower_components/i18next-xhr-backend/js/i18nextXHRBackend.min.js"></script>
<script src="{{ base_url }}/theme/bower_components/i18next-browser-languagedetector/js/i18nextBrowserLanguageDetector.min.js"></script>
<script src="{{ base_url }}/theme/bower_components/jquery-i18next/js/jquery-i18next.min.js"></script>
<script src="{{ base_url }}/theme/bower_components/select2/js/select2.full.min.js"></script>

<script src="{{ base_url }}/theme/assets/js/pcoded.min.js"></script>
<script src="{{ base_url }}/theme/assets/js/vartical-layout.min.js"></script>
<script src="{{ base_url }}/theme/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="{{ base_url }}/theme/assets/js/script.js"></script>
<!--<script src="{{ base_url }}/theme/assets/pages/advance-elements/select2-custom.js"></script>-->


<script>

	if({{ branch.module_heatmap }} == 1){
		$( "#module_heatmap" ).prop( "checked", true );
	}else{
		$( "#module_heatmap" ).prop( "checked", false );
	}

     function validate(){
        	$('.messages').hide();
    		var branch_name = $('#branch_name').val();
			var branch_code = $('#branch_code').val();
    		var company_id = $('#company_id').val();
    		var country_code = $('#country_code').val();
    		var branch_phone = $('#branch_phone').val();
    		var province_id = $('#province_id').val();
			var heatmap = $('#module_heatmap').val();
			var remark = $('#remark').val();
    		var valid = 0;
			if(!branch_name){
				$('#branch_name').parent('div').find('.messages').show();
				valid = 1;
			}
			if(!company_id){
				$('#company_id').parent('div').find('.messages').show();
				valid = 1;
			}
			if(!country_code){
				$('#country_code').parent('div').find('.messages').show();
				valid = 1;
			}
			if(!branch_phone){
				$('#branch_phone').parent('div').find('.messages').show();
				valid = 1;
			}
			if(!province_id){
				$('#province_id').parent('div').find('.messages').show();
				valid = 1;
			}
			var type = '{{ type }}';
			if(type == 'edit'){
				var url = '{{ base_url }}/get-user';
				var current_password = $('#user_password_current').val();
				var user_id = '{{ user.user_id }}';
    				if (valid != 1) {
    					$('#form_branch').submit();
    				}
    		} else {
    			if (valid != 1) {
    				return true;
    			} else {
    				return false;
    			}
    		}
    	}
		
		
		$('.btn-cancel').click(function() {
    		window.history.back();
    		return false;
    	});
    	
    	$('.btn-save').click(function() {
    		return validate();
    	});

</script>
{% endblock %}
